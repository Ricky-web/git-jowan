<article id="show-article">
  <p id="notice"><%= notice %></p>
  
  <div class="currency_pair">
    <h3><%= @post.currency_pair %></h3>
    <%= image_tag "#{@post.currency_pair[0, 3]}.png", class: "currency" %>
    <%= image_tag "#{@post.currency_pair[3, 6]}.png", class: "margin-currency" %>
  </div>
  <div class="article-title">
    <h2><span style="border-bottom: solid 1px black; font-size: 26px;"><%= @post.title %></span></h2>
    <time datetime="<%= DateTime.parse(@post.updated_at.to_s) %>"><span>🖊</span><%= @post.updated_at.strftime("%a, %d %b %Y %X %Z") %></time>
  </div>
  <div class="evaluation-box">
    <% if current_user.already_liked?(@post) %>
        <li style="background: #6495ED;"><%= link_to "👍#{@post.likes.count}", "/posts/#{@post.id}/likes/#{@post.likes.find_by(user_id: current_user.id).id}", method: :delete %></li>
        <% if @post.comments.exists?(user_id: current_user.id) %>
          <li style="background: #6495ED;"><%= link_to "💬#{@post.comments.count}", '#comment', method: :get %></li>
        <% else %>
          <li><%= link_to "💬#{@post.comments.count}", '#comment', method: :get %></li>
        <% end %>
        <% if current_user.already_watched?(@post) %>  
          <li style="background: #6495ED;">👁<%= @post.views.count %></li>
        <% else %>
          <li>👁<%= @post.views.count %></li>
        <% end %>
    <% else %>
        <li><%= link_to "👍#{@post.likes.count}", "/posts/#{@post.id}/likes", method: :post %></li>
        <li><%= link_to "💬#{@post.comments.count}", '#comment', method: :get %></li>
        <% if current_user.already_watched?(@post) %>  
          <li style="background: #6495ED;">👁<%= @post.views.count %></li>
        <% else %>
          <li>👁<%= @post.views.count %></li>
        <% end %>
    <% end %>
  </div>
  <div class="poster-info">
    <% if @post.user.image.attached? %>
        <%= image_tag @post.user.image, alt: "#{@post.user.nickname}", class: "poster-image" %>
    <% else %>
        <%= image_tag "default.png", alt: "#{@post.user.nickname}", class: "poster-image" %>
    <% end %>
    <small>Poster: <%= link_to "#{@post.user.nickname}", user_path(@post.user.id), method: :get %></small>
  </div>
  <div class="separator-line">
    <% if @post.user_id == current_user.id %>
      <%= link_to 'Edit', edit_post_path(@post) %>
      <%= link_to 'Delete', post_path(@post), method: :delete, data: {confirm: "Are you delete?"} %>
    <% end %>
  </div>
    <%= @post.content %>
  <div class="separator-line"></div>
  <div class="comments-area">
    <% if @post.comments %>
      <% @post.comments.each do |comment| %>
        <div class="come">
          <%= simple_format(comment.text) %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="comment-form">
    <%= form_tag("/posts/#{@post.id}/comments", method: :post) do %>
    <% if current_user.image.attached? %>
      <%= image_tag current_user.image %>
    <% else %>
      <%= image_tag "default.png" %>
    <% end %>
    <%= text_area_tag :text %>
    <%= submit_tag 'Create Comment' %>
    <% end %>
  </div>
  <a name="comment"></a>
  <%= link_to '<<Back', posts_path %>
</article>